{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 127, "column": 0}, "map": {"version":3,"sources":["file:///D:/PROJECTS/PYTHON%20AI/travel_blog_generator/3/frontend/app/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport axios from 'axios';\nimport Image from 'next/image';\nimport dynamic from 'next/dynamic';\n\nconst ReactQuill = dynamic(() => import('react-quill'), { ssr: false });\n\n// âœ… Types\ntype Video = {\n  id: {\n    videoId: string;\n  };\n  snippet: {\n    title: string;\n    publishedAt: string;\n    thumbnails: {\n      medium: {\n        url: string;\n      };\n    };\n  };\n};\n\ntype Blog = {\n  title: string;\n  content: string;\n  highlights: string[];\n  tips: string[];\n};\n\nexport default function YouTubeGallery() {\n  const [channelInput, setChannelInput] = useState('');\n  const [videos, setVideos] = useState<Video[]>([]);\n  const [selectedVideos, setSelectedVideos] = useState<string[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [editableBlog, setEditableBlog] = useState<Blog | null>(null);\n\n  const getChannelIdFromQuery = async (query: string): Promise<string | null> => {\n    const YOUTUBE_API_KEY = process.env.NEXT_PUBLIC_YOUTUBE_API_KEY;\n    const url = `https://www.googleapis.com/youtube/v3/search?key=${YOUTUBE_API_KEY}&q=${encodeURIComponent(\n      query\n    )}&type=channel&part=snippet`;\n    try {\n      const res = await axios.get(url);\n      return res.data.items[0]?.snippet?.channelId || null;\n    } catch (err) {\n      console.error('Error fetching channel ID:', err);\n      return null;\n    }\n  };\n\n  const getRecentVideos = async (channelId: string): Promise<void> => {\n    setLoading(true);\n    const YOUTUBE_API_KEY = process.env.NEXT_PUBLIC_YOUTUBE_API_KEY;\n    const url = `https://www.googleapis.com/youtube/v3/search?key=${YOUTUBE_API_KEY}&channelId=${channelId}&part=snippet&order=date&maxResults=6`;\n    try {\n      const res = await axios.get(url);\n      setVideos(res.data.items);\n    } catch (err) {\n      console.error('Error fetching videos:', err);\n    }\n    setLoading(false);\n  };\n\n  const fetchVideos = async () => {\n    const channelId = await getChannelIdFromQuery(channelInput);\n    if (!channelId) return;\n    await getRecentVideos(channelId);\n  };\n\n  const toggleVideoSelection = (videoId: string) => {\n    setSelectedVideos((prev) =>\n      prev.includes(videoId) ? prev.filter((id) => id !== videoId) : [...prev, videoId]\n    );\n  };\n\n  const generateCombinedBlog = async () => {\n    const urls = selectedVideos.map((id) => `https://www.youtube.com/watch?v=${id}`);\n    try {\n      const res = await axios.post<Blog>('http://127.0.0.1:8000/generate-blog', {\n        youtube_urls: urls,\n      });\n      setEditableBlog(res.data);\n    } catch (err) {\n      console.error('Blog generation failed', err);\n    }\n  };\n\n  return (\n    <div className=\"p-6 max-w-4xl mx-auto\">\n      <h1 className=\"text-2xl font-bold mb-4\">YouTube Blog Generator</h1>\n\n      <div className=\"flex gap-2 mb-4\">\n        <input\n          type=\"text\"\n          placeholder=\"Enter YouTube Channel Name or URL\"\n          value={channelInput}\n          onChange={(e) => setChannelInput(e.target.value)}\n          className=\"border px-3 py-2 rounded w-full\"\n        />\n        <button onClick={fetchVideos} className=\"bg-blue-600 text-white px-4 py-2 rounded\">\n          Fetch Videos\n        </button>\n      </div>\n\n      {loading && <p>Loading videos...</p>}\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n        {videos.map((video) => (\n          <div key={video.id.videoId} className=\"border rounded p-3\">\n            <Image\n              src={video.snippet.thumbnails.medium.url}\n              alt={video.snippet.title}\n              width={320}\n              height={180}\n              className=\"rounded mb-2\"\n            />\n            <div className=\"flex items-center gap-2 mb-2\">\n              <input\n                type=\"checkbox\"\n                checked={selectedVideos.includes(video.id.videoId)}\n                onChange={() => toggleVideoSelection(video.id.videoId)}\n              />\n              <h2 className=\"font-semibold text-lg\">{video.snippet.title}</h2>\n            </div>\n            <p className=\"text-sm text-gray-600\">{video.snippet.publishedAt}</p>\n          </div>\n        ))}\n      </div>\n\n      {selectedVideos.length > 0 && (\n        <button\n          className=\"mt-4 bg-purple-600 text-white px-4 py-2 rounded\"\n          onClick={generateCombinedBlog}\n        >\n          Generate Combined Blog ({selectedVideos.length})\n        </button>\n      )}\n\n      {editableBlog && (\n        <div className=\"mt-8 p-4 border rounded bg-gray-100 space-y-4\">\n          <input\n            className=\"text-xl font-bold w-full border-b\"\n            value={editableBlog.title}\n            onChange={(e) => setEditableBlog({ ...editableBlog, title: e.target.value })}\n          />\n          <ReactQuill\n            value={editableBlog.content}\n            onChange={(val) => setEditableBlog({ ...editableBlog, content: val })}\n          />\n\n          <div>\n            <h3 className=\"font-semibold\">Highlights:</h3>\n            {editableBlog.highlights.map((h, i) => (\n              <input\n                key={i}\n                className=\"w-full border px-2 py-1 mt-1\"\n                value={h}\n                onChange={(e) => {\n                  const newHighlights = [...editableBlog.highlights];\n                  newHighlights[i] = e.target.value;\n                  setEditableBlog({ ...editableBlog, highlights: newHighlights });\n                }}\n              />\n            ))}\n          </div>\n\n          <div className=\"mt-4\">\n            <h3 className=\"font-semibold\">Tips:</h3>\n            {editableBlog.tips.map((t, i) => (\n              <input\n                key={i}\n                className=\"w-full border px-2 py-1 mt-1\"\n                value={t}\n                onChange={(e) => {\n                  const newTips = [...editableBlog.tips];\n                  newTips[i] = e.target.value;\n                  setEditableBlog({ ...editableBlog, tips: newTips });\n                }}\n              />\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}